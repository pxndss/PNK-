{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./PropertiesList.css';// Opcional: crea este archivo CSS para estilos específicos\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PropertiesList=()=>{const[properties,setProperties]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchProperties=async()=>{try{// URL de tu API PHP en EC2 para obtener las propiedades\nconst response=await fetch('http://18.218.217.229/api/get_properties.php');if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();if(data.success){setProperties(data.properties);}else{setError(data.message||'Error al cargar las propiedades.');}}catch(err){console.error(\"Error fetching properties:\",err);setError('No se pudo conectar con el servidor de propiedades.');}finally{setLoading(false);}};fetchProperties();},[]);// El array vacío asegura que se ejecuta solo una vez al montar el componente\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center my-5\",children:\"Cargando propiedades...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger text-center my-5\",children:error});}if(properties.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center my-5\",children:\"No hay propiedades disponibles.\"});}return/*#__PURE__*/_jsx(\"section\",{className:\"properties-list-section py-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Todas Nuestras Propiedades\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:properties.map(property=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card h-100 shadow-sm\",children:[/*#__PURE__*/_jsx(\"img\",{src:property.imagen_principal_url// Usa la URL de la imagen principal\n,className:\"card-img-top\",alt:property.titulo,style:{height:'200px',objectFit:'cover'}// Manejo de error para la imagen: si falla, muestra un placeholder\n,onError:e=>{e.target.onerror=null;e.target.src='http://18.218.217.229/img/placeholder.png';}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:property.titulo}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text text-muted mb-2\",children:[property.direccion,\", \",property.ciudad]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[property.descripcion.substring(0,100),\"...\"]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-unstyled d-flex justify-content-around mt-auto mb-2 small\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-rulers\"}),\" \",property.metros_cuadrados,\" m\\xB2\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-bed\"}),\" \",property.habitaciones]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-bath\"}),\" \",property.banos]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text font-weight-bold text-primary mt-2\",children:[\"$\",property.precio.toLocaleString('es-CL')]}),/*#__PURE__*/_jsx(\"a\",{href:`/propiedad/${property.property_id}`,className:\"btn btn-primary mt-auto\",children:\"Ver Detalles\"})]})]})},property.property_id))})]})});};export default PropertiesList;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","PropertiesList","properties","setProperties","loading","setLoading","error","setError","fetchProperties","response","fetch","ok","Error","status","data","json","success","message","err","console","className","children","length","map","property","src","imagen_principal_url","alt","titulo","style","height","objectFit","onError","e","target","onerror","direccion","ciudad","descripcion","substring","metros_cuadrados","habitaciones","banos","precio","toLocaleString","href","property_id"],"sources":["C:/xampp/php/www/pnk-react/src/components/PropertiesList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './PropertiesList.css'; // Opcional: crea este archivo CSS para estilos específicos\r\n\r\nconst PropertiesList = () => {\r\n    const [properties, setProperties] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchProperties = async () => {\r\n            try {\r\n                // URL de tu API PHP en EC2 para obtener las propiedades\r\n                const response = await fetch('http://18.218.217.229/api/get_properties.php'); \r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                const data = await response.json();\r\n                \r\n                if (data.success) {\r\n                    setProperties(data.properties);\r\n                } else {\r\n                    setError(data.message || 'Error al cargar las propiedades.');\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Error fetching properties:\", err);\r\n                setError('No se pudo conectar con el servidor de propiedades.');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchProperties();\r\n    }, []); // El array vacío asegura que se ejecuta solo una vez al montar el componente\r\n\r\n    if (loading) {\r\n        return <div className=\"text-center my-5\">Cargando propiedades...</div>;\r\n    }\r\n\r\n    if (error) {\r\n        return <div className=\"alert alert-danger text-center my-5\">{error}</div>;\r\n    }\r\n\r\n    if (properties.length === 0) {\r\n        return <div className=\"text-center my-5\">No hay propiedades disponibles.</div>;\r\n    }\r\n\r\n    return (\r\n        <section className=\"properties-list-section py-5\">\r\n            <div className=\"container\">\r\n                <h2 className=\"text-center mb-4\">Todas Nuestras Propiedades</h2>\r\n                <div className=\"row\">\r\n                    {properties.map(property => (\r\n                        <div key={property.property_id} className=\"col-md-4 mb-4\">\r\n                            <div className=\"card h-100 shadow-sm\">\r\n                                <img \r\n                                    src={property.imagen_principal_url} // Usa la URL de la imagen principal\r\n                                    className=\"card-img-top\" \r\n                                    alt={property.titulo} \r\n                                    style={{ height: '200px', objectFit: 'cover' }}\r\n                                    // Manejo de error para la imagen: si falla, muestra un placeholder\r\n                                    onError={(e) => { e.target.onerror = null; e.target.src = 'http://18.218.217.229/img/placeholder.png'; }} \r\n                                />\r\n                                <div className=\"card-body d-flex flex-column\">\r\n                                    <h5 className=\"card-title\">{property.titulo}</h5>\r\n                                    <p className=\"card-text text-muted mb-2\">{property.direccion}, {property.ciudad}</p>\r\n                                    <p className=\"card-text\">{property.descripcion.substring(0, 100)}...</p>\r\n                                    <ul className=\"list-unstyled d-flex justify-content-around mt-auto mb-2 small\">\r\n                                        <li><i className=\"bi bi-rulers\"></i> {property.metros_cuadrados} m²</li>\r\n                                        <li><i className=\"bi bi-bed\"></i> {property.habitaciones}</li>\r\n                                        <li><i className=\"bi bi-bath\"></i> {property.banos}</li>\r\n                                    </ul>\r\n                                    <p className=\"card-text font-weight-bold text-primary mt-2\">${property.precio.toLocaleString('es-CL')}</p>\r\n                                    {/* Esto debería ser un <Link> de React Router si tienes una ruta de detalles */}\r\n                                    <a href={`/propiedad/${property.property_id}`} className=\"btn btn-primary mt-auto\">Ver Detalles</a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default PropertiesList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}