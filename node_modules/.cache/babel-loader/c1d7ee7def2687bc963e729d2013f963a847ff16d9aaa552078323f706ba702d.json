{"ast":null,"code":"import React,{useState}from'react';import{Form,Button,Container,Row,Col,Card}from'react-bootstrap';import Swal from'sweetalert2';import{Link,useNavigate}from'react-router-dom';// ¡IMPORTA TU ARCHIVO DE ESTILOS PERSONALIZADO AQUÍ!\nimport'./LoginStyles.css';// Ruta relativa al mismo directorio\n// Asegúrate de que los iconos de Font Awesome estén disponibles globalmente\n// (ej. importados en tu index.html o App.js)\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{onLoginSuccess}=_ref;const[formData,setFormData]=useState({username:'',password:''});const navigate=useNavigate();const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();if(!formData.username||!formData.password){Swal.fire({icon:'warning',title:'Campos Vacíos',text:'Por favor, ingresa tu correo electrónico y contraseña.',confirmButtonColor:'#ff8c00'});return;}try{// *** ¡IMPORTANTE! AJUSTA ESTA URL CON LA IP REAL DE TU EC2 ***\nconst response=await fetch('http://18.218.217.229/api/login.php',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:formData.username,password:formData.password})});const data=await response.json();if(response.ok&&data.success){Swal.fire({icon:'success',title:'¡Bienvenido!',text:data.message,timer:2000,showConfirmButton:false,confirmButtonColor:'#ff8c00'}).then(()=>{if(onLoginSuccess){onLoginSuccess(data.user);// Llama a la función de éxito si se proporciona\n}navigate('/dashboard');// Redirige al dashboard\n});}else{Swal.fire({icon:'error',title:'Acceso Denegado',text:data.message||'Usuario o contraseña incorrectos.',confirmButtonColor:'#dc3545'});}}catch(error){console.error(\"Error en el login:\",error);Swal.fire({icon:'error',title:'Error de Conexión',text:'Hubo un problema al conectar con el servidor. Inténtalo de nuevo más tarde.',confirmButtonColor:'#dc3545'});}};return/*#__PURE__*/_jsx(Container,{fluid:true,className:\"login-full-height\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center align-items-center h-100\",children:/*#__PURE__*/_jsx(Col,{md:6,lg:4,children:/*#__PURE__*/_jsx(Card,{className:\"login-card custom-shadow\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"login-icon\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"Logo PNK\",style:{maxWidth:'100px',marginBottom:'20px'}})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4 login-titulo\",children:\"Iniciar Sesi\\xF3n\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicUsername\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Usuario / Correo Electr\\xF3nico\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Ingresa tu correo\",name:\"username\",value:formData.username,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Contrase\\xF1a\",name:\"password\",value:formData.password,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"w-100 mt-3\",children:\"Ingresar\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsx(Link,{to:\"/recuperar\",className:\"text-decoration-none\",children:\"\\xBFOlvidaste tu contrase\\xF1a?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-3 login-enlace\",children:[\"\\xBFNo tienes cuenta? \",/*#__PURE__*/_jsx(Link,{to:\"/registro\",children:\"Reg\\xEDstrate aqu\\xED\"})]})]})})})})});};export default Login;","map":{"version":3,"names":["React","useState","Form","Button","Container","Row","Col","Card","Swal","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLoginSuccess","formData","setFormData","username","password","navigate","handleChange","e","target","name","value","handleSubmit","preventDefault","fire","icon","title","text","confirmButtonColor","response","fetch","method","headers","body","JSON","stringify","email","data","json","ok","success","message","timer","showConfirmButton","then","user","error","console","fluid","className","children","md","lg","Body","src","alt","style","maxWidth","marginBottom","onSubmit","Group","controlId","Label","Control","type","placeholder","onChange","required","variant","to"],"sources":["C:/xampp/php/www/pnk-react/src/components/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Form, Button, Container, Row, Col, Card } from 'react-bootstrap';\r\nimport Swal from 'sweetalert2';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\n\r\n// ¡IMPORTA TU ARCHIVO DE ESTILOS PERSONALIZADO AQUÍ!\r\nimport './LoginStyles.css'; // Ruta relativa al mismo directorio\r\n\r\n// Asegúrate de que los iconos de Font Awesome estén disponibles globalmente\r\n// (ej. importados en tu index.html o App.js)\r\n\r\nconst Login = ({ onLoginSuccess }) => {\r\n    const [formData, setFormData] = useState({\r\n        username: '',\r\n        password: ''\r\n    });\r\n    const navigate = useNavigate();\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!formData.username || !formData.password) {\r\n            Swal.fire({\r\n                icon: 'warning',\r\n                title: 'Campos Vacíos',\r\n                text: 'Por favor, ingresa tu correo electrónico y contraseña.',\r\n                confirmButtonColor: '#ff8c00'\r\n            });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // *** ¡IMPORTANTE! AJUSTA ESTA URL CON LA IP REAL DE TU EC2 ***\r\n            const response = await fetch('http://18.218.217.229/api/login.php', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ email: formData.username, password: formData.password }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.ok && data.success) {\r\n                Swal.fire({\r\n                    icon: 'success',\r\n                    title: '¡Bienvenido!',\r\n                    text: data.message,\r\n                    timer: 2000,\r\n                    showConfirmButton: false,\r\n                    confirmButtonColor: '#ff8c00'\r\n                }).then(() => {\r\n                    if (onLoginSuccess) {\r\n                        onLoginSuccess(data.user); // Llama a la función de éxito si se proporciona\r\n                    }\r\n                    navigate('/dashboard'); // Redirige al dashboard\r\n                });\r\n            } else {\r\n                Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Acceso Denegado',\r\n                    text: data.message || 'Usuario o contraseña incorrectos.',\r\n                    confirmButtonColor: '#dc3545'\r\n                });\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error en el login:\", error);\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'Error de Conexión',\r\n                text: 'Hubo un problema al conectar con el servidor. Inténtalo de nuevo más tarde.',\r\n                confirmButtonColor: '#dc3545'\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Container fluid className=\"login-full-height\">\r\n            <Row className=\"justify-content-center align-items-center h-100\">\r\n                <Col md={6} lg={4}>\r\n                    <Card className=\"login-card custom-shadow\">\r\n                        <Card.Body>\r\n                            <div className=\"login-icon\">\r\n                                {/* Asegúrate de que logo.png exista en tu carpeta 'public' de React */}\r\n                                <img src=\"/logo.png\" alt=\"Logo PNK\" style={{ maxWidth: '100px', marginBottom: '20px' }} />\r\n                                {/* O un icono de Font Awesome si lo prefieres: */}\r\n                                {/* <i className=\"fas fa-user-circle\" style={{ fontSize: '80px', color: '#e67e22', marginBottom: '20px' }}></i> */}\r\n                            </div>\r\n\r\n                            <h2 className=\"text-center mb-4 login-titulo\">\r\n                                Iniciar Sesión\r\n                            </h2>\r\n                            <Form onSubmit={handleSubmit}>\r\n                                <Form.Group className=\"mb-3\" controlId=\"formBasicUsername\">\r\n                                    <Form.Label>Usuario / Correo Electrónico</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"email\"\r\n                                        placeholder=\"Ingresa tu correo\"\r\n                                        name=\"username\"\r\n                                        value={formData.username}\r\n                                        onChange={handleChange}\r\n                                        required\r\n                                    />\r\n                                </Form.Group>\r\n\r\n                                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                                    <Form.Label>Contraseña</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"password\"\r\n                                        placeholder=\"Contraseña\"\r\n                                        name=\"password\"\r\n                                        value={formData.password}\r\n                                        onChange={handleChange}\r\n                                        required\r\n                                    />\r\n                                </Form.Group>\r\n\r\n                                <Button variant=\"primary\" type=\"submit\" className=\"w-100 mt-3\">\r\n                                    Ingresar\r\n                                </Button>\r\n                            </Form>\r\n                            <div className=\"text-center mt-3\">\r\n                                <Link to=\"/recuperar\" className=\"text-decoration-none\">¿Olvidaste tu contraseña?</Link>\r\n                            </div>\r\n                            <div className=\"text-center mt-3 login-enlace\">\r\n                                ¿No tienes cuenta? <Link to=\"/registro\">Regístrate aquí</Link>\r\n                            </div>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}