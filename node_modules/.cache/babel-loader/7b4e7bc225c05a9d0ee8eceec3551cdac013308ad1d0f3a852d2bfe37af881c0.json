{"ast":null,"code":"import React,{useState}from'react';import{Form,Button,Container,Row,Col,Card}from'react-bootstrap';import Swal from'sweetalert2';import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{onLoginSuccess}=_ref;const[formData,setFormData]=useState({username:'',password:''});const navigate=useNavigate();const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();if(!formData.username||!formData.password){Swal.fire({icon:'warning',title:'Campos Vacíos',text:'Por favor, ingresa tu usuario y contraseña.',confirmButtonColor:'#007bff'});return;}try{// *** ¡IMPORTANTE! AJUSTA ESTA URL CON LA IP REAL DE TU EC2 ***\nconst response=await fetch('http://TU_IP_EC2/api/login.php',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});const data=await response.json();if(response.ok&&data.success){Swal.fire({icon:'success',title:'¡Bienvenido!',text:data.message,timer:2000,showConfirmButton:false}).then(()=>{onLoginSuccess(data.user);navigate('/dashboard');// Redirige al dashboard\n});}else{Swal.fire({icon:'error',title:'Acceso Denegado',text:data.message||'Usuario o contraseña incorrectos.',confirmButtonColor:'#dc3545'});}}catch(error){console.error(\"Error en el login:\",error);Swal.fire({icon:'error',title:'Error de Conexión',text:'Hubo un problema al conectar con el servidor. Inténtalo de nuevo.',confirmButtonColor:'#dc3545'});}};return/*#__PURE__*/_jsx(Container,{className:\"my-5\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Card,{className:\"shadow p-4\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Iniciar Sesi\\xF3n\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicUsername\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Usuario / Correo Electr\\xF3nico\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Ingresa tu usuario o correo\",name:\"username\",value:formData.username,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Contrase\\xF1a\",name:\"password\",value:formData.password,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"w-100 mt-3\",children:\"Ingresar\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsx(Link,{to:\"/recuperar\",className:\"text-decoration-none\",children:\"\\xBFOlvidaste tu contrase\\xF1a?\"})})]})})})})});};export default Login;","map":{"version":3,"names":["React","useState","Form","Button","Container","Row","Col","Card","Swal","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLoginSuccess","formData","setFormData","username","password","navigate","handleChange","e","target","name","value","handleSubmit","preventDefault","fire","icon","title","text","confirmButtonColor","response","fetch","method","headers","body","JSON","stringify","data","json","ok","success","message","timer","showConfirmButton","then","user","error","console","className","children","md","Body","onSubmit","Group","controlId","Label","Control","type","placeholder","onChange","required","variant","to"],"sources":["C:/xampp/php/www/pnk-react/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Form, Button, Container, Row, Col, Card } from 'react-bootstrap';\r\nimport Swal from 'sweetalert2';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\n\r\nconst Login = ({ onLoginSuccess }) => {\r\n    const [formData, setFormData] = useState({\r\n        username: '',\r\n        password: ''\r\n    });\r\n    const navigate = useNavigate();\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!formData.username || !formData.password) {\r\n            Swal.fire({\r\n                icon: 'warning',\r\n                title: 'Campos Vacíos',\r\n                text: 'Por favor, ingresa tu usuario y contraseña.',\r\n                confirmButtonColor: '#007bff'\r\n            });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // *** ¡IMPORTANTE! AJUSTA ESTA URL CON LA IP REAL DE TU EC2 ***\r\n            const response = await fetch('http://TU_IP_EC2/api/login.php', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(formData),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.ok && data.success) {\r\n                Swal.fire({\r\n                    icon: 'success',\r\n                    title: '¡Bienvenido!',\r\n                    text: data.message,\r\n                    timer: 2000,\r\n                    showConfirmButton: false\r\n                }).then(() => {\r\n                    onLoginSuccess(data.user);\r\n                    navigate('/dashboard'); // Redirige al dashboard\r\n                });\r\n            } else {\r\n                Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Acceso Denegado',\r\n                    text: data.message || 'Usuario o contraseña incorrectos.',\r\n                    confirmButtonColor: '#dc3545'\r\n                });\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error en el login:\", error);\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'Error de Conexión',\r\n                text: 'Hubo un problema al conectar con el servidor. Inténtalo de nuevo.',\r\n                confirmButtonColor: '#dc3545'\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Container className=\"my-5\">\r\n            <Row className=\"justify-content-center\">\r\n                <Col md={6}>\r\n                    <Card className=\"shadow p-4\">\r\n                        <Card.Body>\r\n                            <h2 className=\"text-center mb-4\">Iniciar Sesión</h2>\r\n                            <Form onSubmit={handleSubmit}>\r\n                                <Form.Group className=\"mb-3\" controlId=\"formBasicUsername\">\r\n                                    <Form.Label>Usuario / Correo Electrónico</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        placeholder=\"Ingresa tu usuario o correo\"\r\n                                        name=\"username\"\r\n                                        value={formData.username}\r\n                                        onChange={handleChange}\r\n                                        required\r\n                                    />\r\n                                </Form.Group>\r\n\r\n                                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                                    <Form.Label>Contraseña</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"password\"\r\n                                        placeholder=\"Contraseña\"\r\n                                        name=\"password\"\r\n                                        value={formData.password}\r\n                                        onChange={handleChange}\r\n                                        required\r\n                                    />\r\n                                </Form.Group>\r\n\r\n                                <Button variant=\"primary\" type=\"submit\" className=\"w-100 mt-3\">\r\n                                    Ingresar\r\n                                </Button>\r\n                            </Form>\r\n                            <div className=\"text-center mt-3\">\r\n                                <Link to=\"/recuperar\" className=\"text-decoration-none\">¿Olvidaste tu contraseña?</Link>\r\n                            </div>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}